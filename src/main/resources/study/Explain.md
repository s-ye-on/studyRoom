# EXPLAIN
EXPLAIN은 DB에게 "이 쿼리를 어떻게 실행할 건지 계획을 보여달라"고 요청하는 명령어

## 책 비유
책에서 어떤 내용을 찾는다 했을 때
- ❌인덱스 없음 -> 1페이지부터 끝까지 다 넘김
- ✅목차 있음 -> 바로 해당 페이지 이동

DB도 똑같다  

그런데 우리는 DB가 : 
- 정말 목차(인덱스)를 쓰는지?
- 아니면 전부 다 읽고 있는지? 

이걸 눈으로 확인할 방법이 필요  
👉 그게 바로 EXPLAIN

---

## EXPLAIN이 알려주는 것
```sql
EXPLAIN SELECT ...;
```
을 실행하면 DB가 이런 정보를 줌 : 
- ✔ 어떤 인덱스를 사용할지
- ✔ 테이블을 전체 스캔하는지
- ✔ 예상 조회 row 수
- ✔ 조인 순서
- ✔ 비용(cost)

즉:  
**"이 쿼리가 빠른 쿼리인지, 느린 쿼리인지"를 사전에 분석하는 도구**

---

## 예시
```sql
EXPLAIN
SELECT *
FROM reservation
WHERE study_room_id = 1
  AND status = 'RESERVED';
```
결과에서 이런 걸 보게 됨:
```java
INDEX: IDX_RESERVATION_ROOM_STATUS_TIME
ROWS: 2
```
-> 인덱스를 타고 2건만 검사한다는 뜻 ✅  

반대로: 
```java
TABLE SCAN
ROWS: 100000
```
-> 테이블 전체 스캔 ❌ (성능 위험)

---

## 🎯왜 우리가 EXPLAIN을 보려 하나?
- 복합 인덱스 설계했고
- 중복 예약 쿼리 성능이 중요하고
- 락도 걸려 있어서 쿼리가 빨라야 함

그래서:  
"내 인덱스 설계가 실제로 효과가 있는지"를 검증하는 단계